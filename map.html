<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>수질측정망 지도</title>
<link rel="icon" href="./assets/gongdan-mark.png" />
<meta name="theme-color" content="#0b2239" />

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="">
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
<script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>

<style>
  :root{
    --hdr: 56px;
    --gap: 12px;
    --gap-lg: 16px;
    --panel-w: min(86vw, 320px);
    /* 안전 여백(Safari 노치, 제스처바 포함) */
    --sa-top: env(safe-area-inset-top, 0px);
    --sa-right: env(safe-area-inset-right, 0px);
    --sa-bottom: env(safe-area-inset-bottom, 0px);
    --sa-left: env(safe-area-inset-left, 0px);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Apple SD Gothic Neo,Pretendard,Arial}
  body{background:#0b1622;color:#e6eef6}

  /* 헤더 */
  .appbar{
    height:var(--hdr); position:sticky; top:0; z-index:1000;
    padding:0 calc(var(--gap-lg) + var(--sa-right)) 0 calc(var(--gap-lg) + var(--sa-left));
    display:flex; align-items:center; gap:10px;
    background:#101b2a; border-bottom:1px solid rgba(255,255,255,.08);
  }
  .logo-img{width:36px;height:36px;object-fit:contain}
  .title{font-weight:800;letter-spacing:-.02em;font-size:18px}

  /* 지도 */
  .map-wrap{
    position:relative;
    height: calc(100svh - var(--hdr));
    height: calc(100vh - var(--hdr));
    min-height: 420px;
  }
  #map{width:100%;height:100%}

  /* 필터 패널: 좌상단 고정 + 안전여백 */
  .filter-panel{
    position:absolute; z-index:1100;
    left: calc(var(--gap-lg) + var(--sa-left));
    top: calc(var(--gap-lg) + var(--sa-top));
    width: var(--panel-w);
    background:rgba(16,27,42,.96); color:#e6eef6;
    border:1px solid rgba(255,255,255,.10);
    border-radius:14px; padding:10px 10px 12px; box-shadow:0 4px 10px rgba(0,0,0,.35);
  }
  .panel-head{display:flex;align-items:center;justify-content:space-between;gap:8px}
  .panel-title{margin:0;font-size:13px;color:#9fb6cd}
  .panel-toggle{
    border:none;background:transparent;color:#e6eef6;cursor:pointer;
    width:34px;height:34px;border-radius:10px;display:grid;place-items:center
  }
  .panel-toggle:focus-visible{outline:2px solid #7aa7ff;outline-offset:2px}
  .panel-body{display:flex;flex-direction:column;gap:6px;margin-top:6px}
  label{display:flex;align-items:center;gap:6px;font-size:14px}
  .jump{font-weight:700;color:#9f
