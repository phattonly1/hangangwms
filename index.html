<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>한강 수질관리 대시보드</title>
<style>
  :root { --TAB-H: 48px; }
  html, body { height:100%; margin:0; }
  body { font-family: 'Segoe UI', Roboto, sans-serif; background:#f5f6fa; }

  /* 탭 */
  .tabbar {
    display:flex; align-items:center; height:var(--TAB-H);
    background:#2c3e50; color:#fff;
  }
  .tab {
    flex:1; text-align:center; cursor:pointer; padding:12px 0;
    font-weight:600; border-bottom:3px solid transparent; transition:.2s;
  }
  .tab:hover { background:#34495e; }
  .tab.active { background:#1abc9c; border-bottom-color:#16a085; }

  /* 콘텐츠 영역 (iframe) */
  .pane { display:none; height:calc(100dvh - var(--TAB-H)); }
  .pane.active { display:block; }
  iframe.page {
    width:100%; height:100%; border:0;
  }
</style>
</head>
<body>
  <div class="tabbar">
    <div class="tab active" data-target="mapPane">📍 지도 보기</div>
    <div class="tab" data-target="reqPane">🧾 요청 현황</div>
  </div>

  <div id="mapPane" class="pane active">
    <!-- 첫 화면은 바로 로드 -->
    <iframe id="mapFrame" class="page" src="./map.html"></iframe>
  </div>

  <div id="reqPane" class="pane">
    <!-- 필요할 때 최초 1회 지연로딩 -->
    <iframe id="reqFrame" class="page" data-src="./request.html"></iframe>
  </div>

<script>
  // 탭 전환 + 지연 로딩
  const tabs = document.querySelectorAll('.tab');
  const panes = document.querySelectorAll('.pane');

  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      // 탭 상태
      tabs.forEach(t => t.classList.remove('active'));
      tab.classList.add('active');

      // 패널 상태
      panes.forEach(p => p.classList.remove('active'));
      const targetId = tab.getAttribute('data-target');
      const pane = document.getElementById(targetId);
      pane.classList.add('active');

      // 필요 시 iframe 지연 로딩
      const iframe = pane.querySelector('iframe[data-src]');
      if (iframe && !iframe.src) {
        iframe.src = iframe.getAttribute('data-src');
      }
    });
  });

  // 브라우저 리사이즈 시(모바일 회전 등) iframe 높이 유지: CSS로 충분하지만,
  // 일부 브라우저에서 레이아웃 갱신을 유도
  window.addEventListener('resize', () => {
    document.body.offsetHeight; // no-op reflow
  });
</script>
</body>
</html>
